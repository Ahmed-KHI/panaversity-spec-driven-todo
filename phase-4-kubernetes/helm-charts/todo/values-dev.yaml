# [Task]: T033
# [From]: specs/004-phase-iv-kubernetes/tasks.md Â§Phase 5
# [Description]: Minikube-specific Helm values for local development

# Override image pull policy for local images
global:
  imagePullPolicy: Never  # Use local images loaded into Minikube
  storageClass: "standard"

# Frontend - reduced resources for Minikube
frontend:
  image:
    pullPolicy: "Never"  # Use local image
  
  replicaCount: 1  # Start with 1 replica for development
  
  resources:
    requests:
      cpu: "50m"
      memory: "64Mi"
    limits:
      cpu: "200m"
      memory: "256Mi"
  
  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 80

# Backend - reduced resources for Minikube
backend:
  image:
    pullPolicy: "Never"  # Use local image
  
  replicaCount: 1  # Start with 1 replica for development
  
  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"
  
  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 80

# PostgreSQL - reduced resources for Minikube
postgres:
  resources:
    requests:
      cpu: "100m"
      memory: "256Mi"
    limits:
      cpu: "500m"
      memory: "1Gi"
  
  persistence:
    enabled: true
    storageClass: "standard"
    size: "5Gi"  # Smaller size for development

# Ingress configuration for Minikube
ingress:
  enabled: true
  className: "nginx"
  hosts:
    - host: todo.local
      paths:
        - path: /
          pathType: Prefix
          service: frontend
          port: 3000
        - path: /api
          pathType: Prefix
          service: backend
          port: 8000

# Development configuration
config:
  environment: "development"
  logLevel: "debug"

# Pod Disruption Budget - disabled for development
podDisruptionBudget:
  enabled: false
